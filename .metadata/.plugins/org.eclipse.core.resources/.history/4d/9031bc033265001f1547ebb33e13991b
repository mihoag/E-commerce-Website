$("#linkAddProduct").on("click", function (e) {
	e.preventDefault();
	var linkAddlURL = $(this).attr("href");
	console.log(linkAddlURL);
	$("#addProductModal").modal("show").find(".modal-body").load(linkAddlURL);
});

$('#buttonAdd').on('click', function()
{
	var productId = [];
	var quantity = [];
	$('.check-add:checked').each(function() {
            var pid = $(this).attr('pid');
            productId.push(pid);
            let quan = document.getElementById("quan" + pid).value;
            quantity.push(quan);
            
            postProduct(productId, quantity);
        });
   
})


function postProduct(selectedProducts, quantities)
{
	  $.ajax({
            url: '/MyshopAdmin/api/orders', // Replace with your actual REST controller endpoint
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({
                productIds: selectedProducts,
                quantities: quantities
            }),
            success: function(response) {
                console.log('Success:', response);
                // Handle the successful response here
                 removeProduct(productId);
            },
            error: function(xhr, status, error) {
                console.error('Error:', error);
                // Handle any errors here
            }
        });
}

function removeProduct(ids)
{
	for(let i = 0 ; i < ids.length ; i++)
	{
		$('#product' + ids[i]).remove();
	}
}
